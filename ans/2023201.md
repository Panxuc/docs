# 丢失的练习册

> 本道OJ本身并不难，但对程序运行的时间和空间有较为严格的要求，时间需要为 $O(n)$，空间为 $O(1)$ 才能通过所有的测试样例，请同学们从算法效率的角度出发，选择合适的算法。

这的确是事实。我自己严重高估了本道题目的难度，导致提交了一些 $30$ 分的垃圾（笑）。事实上，这道题目非常简单。如何把 $3$ 个相同的数字消掉而保留 $2$ 个相同的数字呢？只要想通这一点，答案就出来了。

要将两个相同的数字消掉，我们可以用异或运算（`^`）。那么，三个相同的数字怎么实现同样的效果呢？

我们仔细研究可以发现，异或运算的本质是“不进位加法”。我们可以将所有数字转为二进制，再对其每一位用“三进制”来模拟“不进位加法”。我们定义的三进制不进位加法规则如下：

| a   | b   | a + b |
| --- | --- | ----- |
| 0   | 0   | 0     |
| 0   | 1   | 1     |
| 0   | 2   | 2     |
| 1   | 0   | 1     |
| 1   | 1   | 2     |
| 1   | 2   | 0     |
| 2   | 0   | 2     |
| 2   | 1   | 0     |
| 2   | 2   | 1     |

在本题中，对所给的 $3N-1$ 个数字的每一位使用这种三进制不进位加法，得到的结果在每一位上只会是 `0` 和 `2`。当然，由于我们是对每一个数的二进制表示的每一位进行操作，所以结果也是二进制的，只是看起来是三进制的。我们将得到的 `2` 全部转为 `1`，即为结果的二进制。在这种方法中，我们需要用一个 $32$ 位的数组来存储结果。最后，我们只需要把数组中的每一位转换为十进制，就可以得到最终的答案了。这样，我们就可以把 `3` 个相同的数字消掉而保留 `2` 个相同的数字了。

我的聪明的室友还提供了一个简洁的方法。他是对十进制的每一个数进行操作的。他的方法是，创建一个 $10\times 10$ 的二维数组，记录每一位上每一个数字出现的个数，对于十进制每一位的每一个数字，只要它出现了一次，就给对应的位置加一。最后，我们只需要对这个二维数组的每一个位置取模 $3$，就可以得到最终的答案了。

比较这两种方法，不难发现，我的聪明的室友的方法虽然牺牲了一些空间复杂度，但是更加直观。我觉得，这才是助教希望我们采用的方法。所以，我认为，我的聪明的室友的方法更加优雅。

我的另一位聪明的室友经过进一步研究与测试，发现 $65536$ 进制处理这道题目时效果最佳。

下面是我的二进制代码：

```cpp
#include <cstdio>

int ternaryPlus(int a, int b)
{
    if (a + b < 3)
    {
        return a + b;
    }
    else
    {
        return a + b - 3;
    }
}

int main()
{
    int num = 0;
    int temp = 0;
    int ret[32] = {0};
    int ans = 0;
    scanf("%d", &num);
    for (int i = 0; i < 3 * num - 1; i++)
    {
        scanf("%d", &temp);
        for (int j = 0; j < 32; j++)
        {
            ret[j] = ternaryPlus(ret[j], temp & 1);
            temp >>= 1;
            if (temp == 0)
            {
                break;
            }
        }
    }
    for (int i = 0; i < 32; i++)
    {
        if (ret[i])
        {
            ans += 1 << i;
        }
    }
    printf("%d", ans);
    return 0;
}
```

| #   | 状态     | 时间   | 内存   |
| --- | -------- | ------ | ------ |
| 1   | Accepted | 0 ms   | 788 KB |
| 2   | Accepted | 4 ms   | 760 KB |
| 3   | Accepted | 4 ms   | 776 KB |
| 4   | Accepted | 60 ms  | 760 KB |
| 5   | Accepted | 128 ms | 760 KB |
| 6   | Accepted | 320 ms | 792 KB |
| 7   | Accepted | 664 ms | 760 KB |
| 8   | Accepted | 620 ms | 784 KB |
| 9   | Accepted | 668 ms | 788 KB |
| 10  | Accepted | 664 ms | 792 KB |
